/* Generic CRUD styles mapped from Categories.css */

/* Containers */
.categories, .crud{display:flex;flex-direction:column;gap:24px}
.categories-header, .crud-header{display:flex;align-items:center;justify-content:space-between}
.actions {
  display: flex;
  gap: 12px;
  align-items: center;
}
.filter-bar{display:flex;gap:12px;align-items:flex-end;background:rgba(17,26,44,.4);border:1px solid var(--line);border-radius:10px;padding:10px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}
.field{display:flex;flex-direction:column;gap:6px;min-width:160px}
.field.fill{flex:1}
.field .lbl{font-size:.8rem;color:var(--text-2)}
.field input,.field select{height:38px;border:1px solid var(--line);border-radius:8px;background:var(--bg-2);color:var(--text-1);padding:0 10px}
.field input:focus,.field select:focus{outline:none;border-color:var(--pri);box-shadow:0 0 0 3px rgba(0,157,255,.35)}
.categories-content, .crud-page {
  display: flex;
  flex-direction: column;
  gap: 16px;
}
.categories-grid, .crud-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px;align-items:stretch}

/* Cards */
.category-card, .crud-card{
  position:relative;
  isolation:isolate;
  border-radius:16px;
  padding:1px;
  background-image: linear-gradient(135deg, rgba(74,163,255,.25), rgba(136,84,255,.22) 50%, rgba(255,64,160,.22));
  transition: transform .12s ease, filter .12s ease;
  display:flex;
  min-height: 140px;
}
.crud-card::before{ content:""; position:absolute; inset:0; border-radius:inherit; background:inherit; filter:blur(10px); opacity:.45; z-index:0 }
.category-card:hover, .crud-card:hover{ transform: translateY(-1px); filter: brightness(1.03); }

/* inner surface */
.crud-inner{
  border-radius:16px;
  background: rgba(7,17,31,.75);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,.06);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
  padding:14px 14px 14px 24px;
  display:flex;
  flex-direction:column;
  gap:8px;
  position:relative;
  overflow:hidden;
  z-index:1;
  flex:1;
  height:100%;
}

/* accent bar (shown always for now; could be toggled with .is-active) */
.accent-bar{ position:absolute; inset:6px auto 6px 6px; width:4px; border-radius:999px; background-image: linear-gradient(180deg, #4aa3ff, #8b5cf6); opacity:.85 }
.accent-bar::before{ content:""; position:absolute; left:-10px; top:-20%; bottom:-20%; width:24px; border-radius:999px; filter:blur(16px); background: linear-gradient(180deg, rgba(74,163,255,.35), rgba(139,92,246,.35)); pointer-events:none }

/* header */
.card-header{ display:flex; align-items:center; gap:10px }
.category-card h3, .crud-card h3{ margin:0; font-size:1rem; color: var(--text-1); flex:1 }
.card-actions, .crud-actions{ display:flex; gap:8px; align-items:center; flex-shrink:0 }

/* 3-dots button and menu */
.icon-btn.more-btn{ width:34px; height:34px; display:grid; place-items:center; border-radius:12px; border:1px solid rgba(255,255,255,.1); background:rgba(255,255,255,.06); color:var(--text-2); cursor:pointer }
.icon-btn.more-btn:hover{ background:rgba(255,255,255,.1) }
.more-menu{ position:absolute; top:42px; right:12px; display:flex; flex-direction:column; gap:6px; background:rgba(7,17,31,.96); border:1px solid rgba(255,255,255,.12); border-radius:12px; padding:8px; box-shadow:0 8px 24px rgba(0,0,0,.35); opacity:0; transform:translateY(-4px); pointer-events:none; transition:opacity .12s ease, transform .12s ease; z-index:10 }
.more-menu.open{ opacity:1; transform:translateY(0); pointer-events:auto }

/* ensure inner positions for overlays */
.crud-inner{ position:relative }

/* description and clamp */
.category-card .desc, .crud-card .desc{ margin:.25rem 0 0; color:var(--text-3); font-size:.9rem; white-space:pre-wrap; word-break:break-word }
.crud-card .desc.clamp{ display:-webkit-box; -webkit-line-clamp:4; line-clamp:4; -webkit-box-orient:vertical; overflow:hidden }
.crud-inner.with-fade{ padding-bottom:32px }
.crud-card .desc-fade{ pointer-events:none; position:absolute; left:0; right:0; bottom:0; height:24px; background: linear-gradient(to top, rgba(7,17,31,.9), transparent); border-bottom-left-radius:16px; border-bottom-right-radius:16px }

/* Buttons */
.btn{border-radius:8px;padding:8px 12px;cursor:pointer;transition:filter .16s ease, transform .05s ease}
.btn:active{transform:scale(.98)}
.btn.btn-primary {
  background-image: linear-gradient(135deg, #4aa3ff, #3fd0ff);
  color: #07111f;
  border: none;
  padding: 10px 14px;
  border-radius: 10px;
  cursor: pointer;
  box-shadow: 0 6px 18px rgba(0, 157, 255, 0.25);
}
.btn.btn-primary:hover { filter: brightness(1.05); }
.btn.btn-primary:active { transform: translateY(1px); filter: brightness(0.98); }
.btn.btn-primary:focus-visible { outline: none; box-shadow: 0 0 0 3px rgba(0,157,255,.35); }
.btn-secondary{background:var(--bg-2);color:var(--text-1);border:1px solid var(--line)}
.btn-secondary:hover{filter:brightness(1.04)}
.btn-ghost{background:transparent;color:var(--text-2);border:1px solid var(--line)}
.btn-ghost:hover{background:rgba(255,255,255,.04)}
.btn-sm{padding:6px 10px;border-radius:6px;font-size:.9rem}
.delete-btn{background:#c0392b;color:#fff;border:none;border-radius:6px;padding:6px 10px;cursor:pointer}

/* Back link (to dashboard) */
.back-link {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: #9aa6c2;
  text-decoration: none;
  padding: 10px 14px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.15);
}
.back-link:hover { text-decoration: none; background: rgba(255,255,255,0.06); }

/* Modal */
.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;z-index:999}
.category-modal, .crud-modal{width:min(560px,92vw);max-height:min(86vh, 820px);display:flex;flex-direction:column;background:rgba(17,26,44,.9);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:16px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);box-shadow:0 10px 30px rgba(0,0,0,.35);contain:layout paint}
.modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;position:sticky;top:0;background:rgba(17,26,44,.96);z-index:1}
.modal-title h2{margin:0}
.modal-title .subtitle{display:block;color:var(--text-2);font-size:.9rem;margin-top:4px}
.header-actions{display:flex;gap:8px}
.category-form, .crud-form{display:flex;flex-direction:column;gap:12px;flex:1;min-height:0}
.form-body{flex:1;min-height:0;overflow:auto;padding-right:6px}
.form-group{display:flex;flex-direction:column;gap:6px}
.form-group input{background:var(--bg-2);color:var(--text-1);border:1px solid var(--line);border-radius:8px;height:40px;padding:0 12px}
.form-group input:focus{outline:none;border-color:var(--pri);box-shadow:0 0 0 3px rgba(0,157,255,.35)}
/* Make textareas visually consistent with inputs/selects across all CRUD modals/pages */
.form-group textarea{
  background: var(--bg-2);
  color: var(--text-1);
  border: 1px solid var(--line);
  border-radius: 8px;
  padding: 10px 12px;
  min-height: 140px;
  line-height: 1.35;
  resize: vertical;
}
.form-group textarea::placeholder{ color: var(--text-3); opacity:.9 }
.form-group textarea:focus{ outline:none; border-color: var(--pri); box-shadow: 0 0 0 3px rgba(0,157,255,.35) }
/* Make selects visually consistent with inputs across all CRUD modals/pages */
.form-group select{
  background: var(--bg-2);
  color: var(--text-1);
  border: 1px solid var(--line);
  border-radius: 8px;
  height: 40px;
  padding: 0 12px;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: linear-gradient(45deg, transparent 50%, var(--text-2) 50%),
                    linear-gradient(135deg, var(--text-2) 50%, transparent 50%);
  background-position: calc(100% - 18px) 50%, calc(100% - 12px) 50%;
  background-size: 6px 6px, 6px 6px;
  background-repeat: no-repeat;
}
.form-group select:focus{outline:none;border-color:var(--pri);box-shadow:0 0 0 3px rgba(0,157,255,.35)}
.form-group select option{background: var(--bg-2); color: var(--text-1)}
.form-group label{display:flex;align-items:baseline;gap:8px}
.form-group .hint{color:var(--text-2);font-size:.8rem}
.with-counter{position:relative}
.counter{position:absolute;right:10px;bottom:8px;color:var(--text-2);font-size:.75rem}
.counter.limit{color:var(--warn)}
.modal-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:6px;padding-top:8px;background:transparent;border-top:1px solid var(--line)}
.modal-pager{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-top:4px;padding:6px 0;background:transparent;border-top:1px solid var(--line)}
.pager-indicator{color:var(--text-2);font-size:.85rem}
.icon-btn{background:transparent;border:1px solid var(--line);color:var(--text-2);border-radius:10px;width:36px;height:36px;cursor:pointer}

/* Inline error card */
.error{border:1px solid var(--err);color:var(--text-1);background:rgba(255,77,94,.06);padding:10px 12px;border-radius:10px}

/* Overcontent help */
.overcontent{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.45);z-index:1000}
.overcontent-card{width:min(560px,92vw);background:rgba(17,26,44,.92);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:16px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 10px 30px rgba(0,0,0,.35);max-height:min(86vh,820px);display:flex;flex-direction:column}
.overcontent-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.overcontent-header h3{margin:0}
.overcontent-body{flex:1;min-height:0;overflow:auto;padding-right:6px}
.overcontent-body p{margin:.25rem 0 .5rem;color:var(--text-1)}
.overcontent-body ul{margin:0 0 .25rem 1rem;color:var(--text-1)}

/* Fullscreen variant for double-click expansion */
.overcontent.fullscreen{ align-items: stretch; justify-content: stretch; padding: 24px; top:64px }
.overcontent-card.fullscreen{
  width: 100%;
  height: 100%;
  max-width: none;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.overcontent-card.fullscreen .overcontent-body{
  flex: 1;
  min-height: 0;
  overflow: auto;
}

/* Form utilities for complex editors */
.sep{ border: none; border-top: 1px solid var(--line); margin: 12px 0; }
.array-editor{ display:flex; flex-direction:column; gap:10px; }
.array-item{ border:1px solid var(--line); border-radius:10px; padding:10px; background: rgba(17,26,44,.4); }
.inline-fields{ display:flex; gap:10px; align-items:flex-end; flex-wrap:wrap; }
.inline-fields.compact{ gap:8px; align-items:center }
.field.small{ min-width: 120px; }
.field.xsmall{ min-width: 90px; }

/* Segmented control (used in Activities scoring) */
.segmented{ display:inline-flex; background:rgba(255,255,255,.05); border:1px solid var(--line); padding:2px; border-radius:10px; gap:2px }
.segmented .option{ background:transparent; color:var(--text-2); border:none; padding:6px 10px; border-radius:8px; cursor:pointer; transition: background .15s ease, color .15s ease, transform .05s ease }
.segmented .option:hover{ background:rgba(255,255,255,.06); color:var(--text-1) }
.segmented .option:active{ transform: translateY(1px) }
.segmented .option.active{ background-image: linear-gradient(135deg, #4aa3ff, #3fd0ff); color:#07111f; box-shadow: 0 4px 12px rgba(0,157,255,.25) }
.segmented .option:focus-visible{ outline:none; box-shadow: 0 0 0 3px rgba(0,157,255,.35) }

/* Inline checkbox label used in scoring footer */
.check-inline{ display:inline-flex; align-items:center; gap:6px; white-space:nowrap; color: var(--text-2); line-height:1 }
.check-inline input{ width:16px; height:16px; accent-color:#4aa3ff }
.checkbox-field{ min-width:auto }
.checkbox-field .check-inline{ font-size:.85rem }
.push-right{ margin-left:auto }
